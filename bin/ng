#!/usr/bin/env node
'use strict';

var path = require('path');
var pkg = require(path.join(__dirname, '..', 'package.json'));
var program = require('commander');

var ng = require(path.join(__dirname, '..', 'lib'));

program
  .version(pkg.version)
  .usage("<command> [options]");

program.name = 'ng';

// init command

program
  .command('init')
  .description('Generates an application/component structure for you in the current folder')
  .action(function () {
    ng.init(process.argv.slice(4));
  })
;

// build command

program
  .command('build')
  .description('Alias for "gulp build"')
  .action(function () {
    ng.build(process.argv.slice(4));
  })
;

// serve command

program
  .command('serve')
  .description('Alias for "gulp serve"')
  .action(function () {
    ng.serve(process.argv.slice(4));
  })
;

program.parse(process.argv);

// infinite stack traces
Error.stackTraceLimit = Infinity;

if (!program.args.length) {
  program.help();
}
